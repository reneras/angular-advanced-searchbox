/*! 
 * angular-advanced-searchbox v1.1.1
 * https://github.com/dnauck/angular-advanced-searchbox
 * Copyright (c) 2015 Nauck IT KG http://www.nauck-it.de/
 * License: MIT
 */
!function(){"use strict";angular.module("angular-advanced-searchbox",[]).directive("nitAdvancedSearchbox",function(a,b){return{restrict:"E",scope:{model:"=ngModel",parameters:"="},templateUrl:"angular-advanced-searchbox.html",link:function(a,c){function d(){angular.forEach(a.model,function(c,d){if("query"===d)a.searchQuery=c;else{var e=b("filter")(a.parameters,function(a){return a.key===d})[0];void 0!==e&&a.addSearchParam(e,c,!1)}})}function e(a){if(!a)return 0;if("number"==typeof a.selectionStart)return"backward"===a.selectionDirection?a.selectionStart:a.selectionEnd;if(document.selection){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-c}return 0}a.placeholder=c.placeholder||"Search ...",a.searchParams=[],a.searchQuery="",a.setSearchFocus=!1,a.$watch(function(){return["searchQuery","searchParams"].map(angular.bind(a,a.$eval))},function(){angular.forEach(a.model,function(b,c){delete a.model[c]}),a.model.query=a.searchQuery,angular.forEach(a.searchParams,function(b){void 0!==b.value&&b.value.length>0&&(a.model[b.key]=b.value)})},!0),a.enterEditMode=function(b){if(void 0!==b){var c=a.searchParams[b];c.editMode=!0}},a.leaveEditMode=function(b){if(void 0!==b){var c=a.searchParams[b];c.editMode=!1,c.value||a.removeSearchParam(b)}},a.typeaheadOnSelect=function(b,c,d){a.addSearchParam(b),a.searchQuery=""},a.addSearchParam=function(b,c,d){void 0===d&&(d=!0),a.searchParams.push({key:b.key,name:b.name,placeholder:b.placeholder,value:c||"",editMode:d})},a.removeSearchParam=function(b){void 0!==b&&a.searchParams.splice(b,1)},a.removeAll=function(){a.searchParams.length=0,a.searchQuery=""},a.editPrevious=function(b){void 0!==b&&a.leaveEditMode(b),b>0?a.enterEditMode(b-1):a.searchParams.length>0&&a.enterEditMode(a.searchParams.length-1)},a.editNext=function(b){void 0!==b&&(a.leaveEditMode(b),b<a.searchParams.length-1?a.enterEditMode(b+1):a.setSearchFocus=!0)},a.keydown=function(b,c){var d=[8,9,13,37,39];if(-1!==d.indexOf(b.which)){var f=e(b.target);8==b.which?0===f&&a.editPrevious(c):9==b.which?b.shiftKey?(b.preventDefault(),a.editPrevious(c)):(b.preventDefault(),a.editNext(c)):13==b.which?a.editNext(c):37==b.which?0===f&&a.editPrevious(c):39==b.which&&f===b.target.value.length&&a.editNext(c)}},void 0===a.model?a.model={}:d()}}}).directive("nitSetFocus",["$timeout","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.nitSetFocus);c.$watch(f,function(b){b===!0&&a(function(){d[0].focus()})}),d.bind("blur",function(){c.$apply(f.assign(c,!1))})}}}]).directive("nitAutoSizeInput",[function(){return{restrict:"A",scope:{model:"=ngModel"},link:function(a,b,c){function d(){f.text(b.val()||b.attr("placeholder")),b.css("width",f.outerWidth()+10)}var e=angular.element('<div style="position: fixed; top: -9999px; left: 0px;"></div>'),f=angular.element('<span style="white-space:pre;"></span>'),g="none"===b.css("maxWidth")?b.parent().innerWidth():b.css("maxWidth");b.css("maxWidth",g),angular.forEach(["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","boxSizing","borderLeftWidth","borderRightWidth","borderLeftStyle","borderRightStyle","paddingLeft","paddingRight","marginLeft","marginRight"],function(a){f.css(a,b.css(a))}),angular.element("body").append(e.append(f)),d(),a.model?a.$watch("model",function(){d()}):b.on("keypress keyup keydown focus input propertychange change",function(){d()})}}}])}();